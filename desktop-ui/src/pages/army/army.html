<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Army Detail</title>
  <link rel="stylesheet" href="./army.css">
  <script src="../../lib/host.js"></script>
  <script src="../../lib/widgets/contextMenu.js"></script>
  <script src="../../lib/roster.js"></script>
  <script src="./army.js"></script>
  <script>
    window.addEventListener( "pageshow", function ( event ) {
      var historyTraversal = event.persisted || 
                            ( typeof window.performance != "undefined" && 
                                  window.performance.navigation.type === 2 );
      if ( historyTraversal ) {
        // Handle page restore.
        // window.location.reload();
        console.log('load army');
        // loadArmy();
      }
    });
  </script>
</head>

<body>
  <header>
    <button class="back-btn" onclick="goBack()">←</button>
    <span id="army-header">Army Name</span>
  </header>
  
  <div class="section">
    <h2>Regiments <button onclick="addItem('Regiments')">+</button></h2>

    <div style="display: none; overflow: hidden;" class="unit-slot" id="unit-slot-prototype">
      <span class="unit-slot-name" style="float: left;"></span>
      <span class="unit-slot-points" style="float: right;"></span>
    </div>

    <div style='display: none' class="regiment-item" id="regiment-item-prototype">
      <div style="display: flex; align-items: center; gap: 0.5rem;">
          <span class="regiment-item-title"></span>
          <span class="regiment-item-points" style="margin-left:auto;"></span>
          <div class="menu-wrapper">
          <button class="menu-btn" onclick="toggleMenu(this)">⋯</button>
          <ul class="menu">
              <li onclick="duplicateRegiment(this)">Duplicate</li>
              <li onclick="deleteRegiment(this)">Delete</li>
          </ul>
          </div>
      </div>
      
      <!-- Content that will hold hero/units -->
      <div class="regiment-content" style="margin-top: 0.5rem;"></div>

      <!-- Add button below content -->
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <span style="margin-left:auto; margin-right: auto;">
          <button class="menu-btn" onclick="addEntry(this)">+</button>
        </span>
      </div>
    </div>

    <div id="regiments">
      
    </div>
  </div>

  <div class="section">
    <h2>Auxiliary Units <button onclick="addItem('Auxiliary Units')">+</button></h2>
    <div id="auxiliary"></div>
  </div>

  <div class="section">
    <h2>Lores <button onclick="addItem('Lores')">+</button></h2>
    <div id="lores"></div>
  </div>

  <div class="section">
    <h2>Battle Tactics <button onclick="addItem('Battle Tactics')">+</button></h2>
    <div id="tactics"></div>
  </div>

  <div class="section">
    <h2>Faction Terrain <button onclick="addItem('Faction Terrain')">+</button></h2>
    <div id="terrain"></div>
  </div>

  <div class="section">
    <h2>Regiments of Renown <button onclick="addItem('Regiments of Renown')">+</button></h2>
    <div id="renown"></div>
  </div>
  
  <div id="pointsOverlay">10 / 2000 points</div>

  
  <script>loadArmy();</script>
</body>
</html>